<!DOCTYPE html>
<html>
	<head>
		<script>
			var authorizationCode;

			function displayAuthorizationCode() {
				let pageURL = window.location.href;
				let stringBeforeCode = "get_authorization_code.html?code=";
				let indexOfSubstringBeforeCode = pageURL.indexOf(stringBeforeCode);
				let lengthOfSubstringBeforeCode = stringBeforeCode.length;
				let indexOfSubstringAfterCode = pageURL.indexOf("&scope=");

				let code = pageURL.substring(
					indexOfSubstringBeforeCode + lengthOfSubstringBeforeCode,
					indexOfSubstringAfterCode,
				);

				authorizationCode = code;

				document.getElementById("authorizationCode").innerHTML = code;
			}

			function copyAuthorizationCodeToClipboard() {
				// Get the text label
				//var copyTextLabel = document.getElementById("authorizationCode");

				// Select the entire text
				//copyTextLabel.select();
				//copyTextLabel.setSelectionRange(0, 99999); // For mobile devices

				// Copy the text inside the label
				navigator.clipboard.writeText(authorizationCode);

				// Alert the copied text
				//alert("Copied the text: " + copyText.value);
			}

			window.onload = displayAuthorizationCode;
		</script>
	</head>

	<body>
		<h2>Authorization Code:</h2>

		<p id="authorizationCode">Authorization-Code</p>

		<!-- The button used to copy the text -->
		<button onclick="copyAuthorizationCodeToClipboard()">Copy Authorization-Code</button>
	</body>
</html>
